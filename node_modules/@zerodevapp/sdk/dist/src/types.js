"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getModuleInfo = void 0;
const ethers_1 = require("ethers");
const module_1 = require("./module");
// we determine if a transaction enables a module by checking:
// - if the sender is equal to the receiver
// - if the function selector is `enableModule`
const getModuleInfo = (tx) => {
    if (tx.to !== tx.from)
        return undefined;
    // parse calldata
    const iface = new ethers_1.ethers.utils.Interface(['function enableModule(address)']);
    try {
        const res = iface.decodeFunctionData('enableModule(address)', tx.data || '0x');
        return {
            name: (0, module_1.getModuleName)(res[0]),
            address: res[0],
        };
    }
    catch (e) {
        return undefined;
    }
};
exports.getModuleInfo = getModuleInfo;
//# sourceMappingURL=types.js.map